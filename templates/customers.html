{% extends "layout.html" %}

{% block content %}
<div class="d-flex align-items-center mb-4">
    <a href="{{ url_for('dashboard') }}" class="btn btn-light rounded-circle me-3"><i class="fas fa-arrow-left"></i></a>
    <h3 class="fw-bold mb-0">قائمة العملاء</h3>
</div>

<form action="{{ url_for('customers') }}" method="get" class="mb-4">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="بحث بالاسم أو رقم الهاتف..." value="{{ query or '' }}">
        <button class="btn btn-primary" type="submit"><i class="fas fa-search"></i></button>
    </div>
</form>

{% if not customers %}
<div class="text-center py-5">
    <i class="fas fa-users fa-3x text-muted mb-3"></i>
    <p class="text-muted">لا يوجد عملاء مطابقين للبحث.</p>
</div>
{% else %}
    {% for c in customers %}
    <a href="{{ url_for('customer_detail', customer_id=c.id) }}" class="card mb-3 p-3 shadow-sm border-0 text-decoration-none text-dark">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h6 class="fw-bold mb-1">{{ c.name }}</h6>
                <small class="text-muted"><i class="fas fa-phone me-1"></i> {{ c.phone }}</small>
                {% if c.city %}<br><small class="text-muted"><i class="fas fa-map-marker-alt me-1"></i> {{ c.city }}</small>{% endif %}
            </div>
            <div class="text-end">
                <span class="badge bg-info-subtle text-info rounded-pill">ID: {{ c.id }}</span>
                <div class="mt-2"><i class="fas fa-chevron-right text-muted small"></i></div>
            </div>
        </div>
    </a>
    {% endfor %}
{% endif %}

{% endblock %}
